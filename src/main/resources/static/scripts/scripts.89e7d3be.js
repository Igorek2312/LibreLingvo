"use strict";angular.module("libreLingvoApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ui.bootstrap","pascalprecht.translate","angular-loading-bar","ui.tinymce","angularMoment","ui.scrollpoint","timer","ui.sortable"]).constant("GRUNT_SERVE_URL","http://localhost:9000").constant("TOMCAT_URL","http://localhost:8080").factory("HostUrl",["GRUNT_SERVE_URL","TOMCAT_URL",function(a,b){var c=location.origin,d=c==a?b:c;return d}]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state({name:"main",url:"/",templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).state({name:"log-in",url:"/log-in",templateUrl:"views/log-in.html",controller:"LogInCtrl",controllerAs:"logIn"}).state({name:"sign-up",url:"/sign-up",templateUrl:"views/sign-up.html",controller:"SignUpCtrl",controllerAs:"signUp"}).state({name:"profile",url:"/profile",templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).state({name:"activate-user",url:"/activate-user?activation-key",controller:"ActivateUserCtrl",controllerAs:"activateUser"}).state({name:"cancel-activation",url:"/cancel-activation?activation-key",controller:"CancelActivationCtrl",controllerAs:"cancelActivation"}).state({name:"user-translations",url:"/user-translations?page-index&search-substring&part-of-speech&sort-field&sort-order&source-lang-code&result-lang-code&learned",templateUrl:"views/user-translations.html",controller:"UserTranslationsCtrl",controllerAs:"userTranslations"}).state({name:"translation.detail",url:"/detail",views:{main:{templateUrl:"views/translation-detail.html",controller:"TranslationDetailCtrl",controllerAs:"translationDetail"},note:{templateUrl:"views/note-detail.html",controller:"NoteDetailCtrl",controllerAs:"noteDetail"}}}).state({name:"translation.edit",url:"/edit",views:{main:{templateUrl:"views/edit-translation.html",controller:"EditTranslationCtrl",controllerAs:"editTranslation"},note:{templateUrl:"views/edit-note.html",controller:"EditNoteCtrl",controllerAs:"editNote"}}}).state({name:"translation",url:"/translation/:translationId",templateUrl:"views/translation.html",controller:"TranslationCtrl",controllerAs:"translation"}).state({name:"lesson",url:"/lesson/:lessonId",templateUrl:"views/lesson.html",controller:"LessonCtrl",controllerAs:"lesson"}).state({name:"lesson.exam",url:"/exam",templateUrl:"views/lesson-exam.html",controller:"LessonExamCtrl"}).state({name:"lesson.view",url:"/view",templateUrl:"views/lesson-view.html",controller:"LessonViewCtrl"}).state({name:"admin",url:"/admin",templateUrl:"views/admin.html",controller:"AdminCtrl",controllerAs:"admin"}).state({name:"admin.users",url:"/users",templateUrl:"views/users.html",controller:"UsersCtrl",controllerAs:"users"}).state({name:"admin.utils",url:"/utils",templateUrl:"views/utils.html",controller:"UtilsCtrl",controllerAs:"utils"}).state({name:"reset-password",url:"/reset-password?reset-key",templateUrl:"views/reset-password.html",controller:"ResetPasswordCtrl"}).state({name:"change-password",url:"/change-password",templateUrl:"views/change-password.html",controller:"ChangePasswordCtrl"}),b.otherwise("/log-in")}]).config(["$httpProvider","MessageType",function(a,b){a.interceptors.push(["$q","$injector",function(a,c){return{request:function(b){return b||a.resolve(b)},requestError:function(b){return a.reject(b)},response:function(b){return b||a.resolve(b)},responseError:function(d){console.log(d);var e=c.get("messageBox");return-1===d.status||(d.data?"Bad credentials"===d.data.error_description?e.show("error.invalid.password",b.ERROR):"User is disabled"===d.data.error_description?e.show("error.disabled.account",b.ERROR):"User account is locked"===d.data.error_description?e.show("error.locked.account",b.ERROR):"invalid_token"===d.data.error?c.get("oauth2").handleInvalidToken():401===d.data.errorCode?e.show(d.data.message,b.ERROR).then(function(){c.get("oauth2").logOut(),c.get("oauth2").handleInvalidToken()}):d.data.message?e.show(d.data.message,b.ERROR):d.data.fieldErrors&&e.showValidationErrorMessage(d.data.fieldErrors):e.show(d,b.ERROR)),a.reject(d)}}}])}]).config(["$translateProvider","HostUrlProvider",function(a,b){var c=b.$get();a.useUrlLoader(c+"/messageBundle"),a.preferredLanguage("en"),a.fallbackLanguage("en"),a.useSanitizeValueStrategy("escapeParameters")}]).run(["$rootScope","$q","lessonsUpdater","oauth2",function(a,b,c,d){d.updateAuthoritiesCallback(function(b){a.hasUserAuthority=b.indexOf("ROLE_USER")>-1,a.hasAdminAuthority=b.indexOf("ROLE_ADMIN")>-1,a.isAnnonymos=b.indexOf("ROLE_ANONYMOUS")>-1,a.hasUserAuthority&&c.updateLessons()}),a.hideAffix=!1}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="content"></div>\n</div>\n')}]),angular.module("libreLingvoApp").controller("MainCtrl",function(){}),angular.module("libreLingvoApp").controller("LogInCtrl",["$scope","$state","$rootScope","$q","oauth2",function(a,b,c,d,e){e.updateAuthorities(function(){c.hasUserAuthority&&b.go("user-translations")}),a.submitAuthorization=function(){e.logIn(a.email,a.password).then(function(){b.go("user-translations")})},a.submitReadonly=function(){e.logIn("readonly@example.com","1234").then(function(){b.go("user-translations")})}}]),angular.module("libreLingvoApp").controller("SignUpCtrl",["$scope","$state","Users","messageBox",function(a,b,c,d){a.register=function(){c.save(a.user).$promise.then(function(){b.go("log-in"),d.show("message.success.registration")})}}]),angular.module("libreLingvoApp").factory("oauth2",["HostUrl","$http","$cookies","$httpParamSerializer","$q","$state","UserAuthorities",function(a,b,c,d,e,f,g){var h={grant_type:"password"},i=btoa("webapp:123456");c.get("access_token")&&(b.defaults.headers.common.Authorization="Bearer "+c.get("access_token"));var j,k={method:"POST",url:a+"/oauth/token",headers:{Authorization:"Basic "+i,"Content-type":"application/x-www-form-urlencoded; charset=utf-8"}},l={method:"DELETE",url:a+"/api/v1/oauth/revoke-token"},m={},n=function(){m=g.query(function(a){j(a)}).$promise};return n(),{logIn:function(a,f){h.username=a,h.password=f,k.data=d(h);var g=e.defer();return b(k).then(function(a){b.defaults.headers.common.Authorization="Bearer "+a.data.access_token,c.put("access_token",a.data.access_token),n(),g.resolve()},function(a){g.reject(a)}),g.promise},logOut:function(){var a=e.defer();return b(l).then(function(){delete b.defaults.headers.common.Authorization,c.remove("access_token"),n(),a.resolve()},function(b){a.reject(b)}),a.promise},handleInvalidToken:function(){c.remove("access_token"),delete b.defaults.headers.common.Authorization,location.href=location.origin},updateAuthoritiesCallback:function(a){j=a},updateAuthorities:function(a){m.then(function(b){a(b)})}}}]),angular.module("libreLingvoApp").factory("messageBox",["$uibModal","$translate","$q","MessageType",function(a,b,c,d){var e,f="none",g="none",h="panel-default",i={animation:!0,size:"lg",resolve:{content:function(){return f},title:function(){return g},panelClass:function(){return h}}},j={animation:!0,size:"lg",resolve:{fieldErrors:function(){return e}}},k=function(a){return a===d.INFO||a===d.SUCCESS?"label.message.title.ok":a===d.WARNING?"label.message.title.warning":a===d.ERROR?"label.message.title.error":void 0},l=function(a){return a===d.INFO?"panel-info":a===d.SUCCESS?"panel-success":a===d.WARNING?"panel-warning":a===d.ERROR?"panel-danger":void 0};return{show:function(b,c){return f=b,c=c||d.SUCCESS,g=k(c),h=l(c),i.templateUrl="views/modal-message.html",i.controller="ModalMessageCtrl",a.open(i).result},showValidationErrorMessage:function(b){return e=b,j.templateUrl="views/validation-error-modal-message.html",j.controller="ValidationErrorModalMessageCtrl",a.open(j).result},showGeneralQuestion:function(b,c){return f=b,c=c||d.WARNING,h=l(c),g=g=k(c),i.templateUrl="views/general-question-modal.html",i.controller="GeneralQuestionModalCtrl",a.open(i).result},showInputDialog:function(b,c){return f=c,g=b,h=l(d.SUCCESS),i.templateUrl="views/input-dialog-modal.html",i.controller="InputDialogModalCtrl",a.open(i).result},showSelectTagDialog:function(){return h=l(d.SUCCESS),i.templateUrl="views/select-tag-modal.html",i.controller="SelectTagModalCtrl",a.open(i).result}}}]).constant("MessageType",{INFO:1,SUCCESS:2,WARNING:3,ERROR:4}),angular.module("libreLingvoApp").controller("ModalMessageCtrl",["$scope","$uibModalInstance","content","title","panelClass",function(a,b,c,d,e){a.content=c,a.title=d,a.panelClass=e,a.onOk=function(){b.close()}}]),angular.module("libreLingvoApp").factory("UserAuthorities",["$resource","HostUrl",function(a,b){return a(b+"/api/v1/users/me/authorities")}]),angular.module("libreLingvoApp").controller("ProfileCtrl",["$scope","Users",function(a,b){b.get({userId:"me"}).$promise.then(function(b){a.user=b}),a.saveChanges=function(){b.update({userId:"me"},a.user)}}]),angular.module("libreLingvoApp").directive("wjValidationError",["$filter",function(a){return{require:"ngModel",link:function(b,c,d,e){b.$watch(d.wjValidationError,function(b){var d=a("translate");c[0].setCustomValidity(d(b)),e.$setValidity("wjValidationError",b?!1:!0)})}}}]),angular.module("libreLingvoApp").factory("Users",["$resource","HostUrl",function(a,b){return a(b+"/api/v1/users/:userId/:field",{userId:"@id",field:"@fieldName"},{update:{method:"PUT"}})}]),angular.module("libreLingvoApp").controller("ActivateUserCtrl",["$scope","$state","$stateParams","UsersActions","messageBox",function(a,b,c,d,e){c["activation-key"]&&(b.go("log-in"),d.update({"activation-key":c["activation-key"],action:"enable"},{},function(){e.show("message.success.user.enabling")}))}]),angular.module("libreLingvoApp").controller("CancelActivationCtrl",["$scope","$state","$stateParams","UsersActions",function(a,b,c,d){c["activation-key"]&&(b.go("main"),d["delete"]({"activation-key":c["activation-key"]},function(){messageBox.show("message.success.user.enabling")}))}]),angular.module("libreLingvoApp").controller("ValidationErrorModalMessageCtrl",["$scope","$uibModalInstance","fieldErrors",function(a,b,c){a.fieldErrors=c,a.onOk=function(){b.close()}}]),angular.module("libreLingvoApp").controller("UserTranslationsCtrl",["$scope","$state","$translate","$stateParams","$rootScope","messageBox","Translations","tts","Users","Lessons","lessonsUpdater","Tags",function(a,b,c,d,e,f,g,h,i,j,k,l){i.get({userId:"me"},function(b){a.maxRecords=b.translationsInOneLesson,setTimeout(function(){a.pageIndex=d["page-index"]||1,e.updateTranslations()},0)}),a.maxPagSize=5,a.searchSubstring=d["search-substring"],a.partOfSpeech=d["part-of-speech"]||"ALL",d["source-lang-code"]&&d["result-lang-code"]?a.langCodesPair=JSON.stringify({source:d["source-lang-code"],result:d["result-lang-code"]}):a.langCodesPair="null",a.sortField=d["sort-field"],a.sortOrder=d["sort-order"],a.learned=d.learned||"false",a.play=h.play,a.supports=h.supports,a.selectedTranslationIds=[],a.toggleAllCheckboxes=function(b){b?a.translations.forEach(function(b){a.selectedTranslationIds.push(b.id)}):a.selectedTranslationIds.length=0},a.selectionInterpol={},a.$watch("selectedTranslationIds.length",function(b){a.selectionInterpol.selectedTranslationsCount=b}),e.updateTranslations=function(){a.selectedTranslationIds=[];var c=JSON.parse(a.langCodesPair);g.get({userId:"me","max-records":a.maxRecords,"page-index":a.pageIndex,"search-substring":a.searchSubstring,"part-of-speech":"ALL"==a.partOfSpeech?null:a.partOfSpeech,"source-lang-code":c?c.source:null,"result-lang-code":c?c.result:null,"sort-field":a.sortField,"sort-order":a.sortField&&!a.sortOrder?"ASC":a.sortOrder,learned:"ALL"==a.learned?null:a.learned,"tag-ids":a.selectedTagsIds},function(d){a.translations=d.translations,a.filteredRecords=d.filteredRecords,a.totalRecords=d.totalRecords,a.countInterpol={filteredRecords:a.filteredRecords,totalRecords:a.totalRecords},a.langCodesPairs=d.langCodesPairs,a.partsOfSpeech=d.partsOfSpeech,a.selectionInterpol.translationsCount=a.translations.length,b.transitionTo("user-translations",{"page-index":a.pageIndex,"search-substring":a.searchSubstring,"part-of-speech":"ALL"==a.partOfSpeech?null:a.partOfSpeech,"source-lang-code":c?c.source:null,"result-lang-code":c?c.result:null,"sort-field":a.sortField,"sort-order":a.sortOrder,learned:a.learned},{notify:!1})})},a.deleteTranslations=function(){e.hideAffix=!0,f.showGeneralQuestion("question.on.delete.translations").then(function(){e.hideAffix=!1,g["delete"]({userId:"me",ids:a.selectedTranslationIds},function(){e.updateTranslations(),a.selectedTranslationIds=[]},function(a){a.data&&404===a.data.errorCode&&e.updateTranslations()})},function(){e.hideAffix=!1})},a.learnTranslations=function(c){var d=c?a.selectedTranslationIds:a.translations.map(function(a){return a.id});j.save({},{translationIds:d},function(a){k.updateLessons().then(function(){setTimeout(function(){b.go("lesson",{lessonId:a.id})},300)})})},a.toggleSelection=function(b){var c=a.selectedTranslationIds.indexOf(b);c>-1?a.selectedTranslationIds.splice(c,1):a.selectedTranslationIds.push(b)},a.createTag=function(){e.hideAffix=!0,f.showInputDialog("label.message.title.input.tag.name").then(function(b){e.hideAffix=!1,l.save({},{name:b},function(){a.updateTags()})},function(){e.hideAffix=!1})},a.updateTags=function(){l.query({},function(b){a.tags=b})},a.selectedTagsIds=[],a.toggleTag=function(b){var c=a.selectedTagsIds.indexOf(b.id);c>-1?a.selectedTagsIds.splice(c,1):a.selectedTagsIds.push(b.id),e.updateTranslations()},a.isTagSelected=function(b){return a.selectedTagsIds.indexOf(b.id)>-1},a.renameTag=function(b){e.hideAffix=!0,f.showInputDialog("label.message.title.input.tag.name",b.name).then(function(c){e.hideAffix=!1,l.update({tagId:b.id},{name:c},function(){a.updateTags()})},function(){e.hideAffix=!1})},a.deleteTag=function(b){e.hideAffix=!0,f.showGeneralQuestion("question.on.delete.tag").then(function(){e.hideAffix=!1,l["delete"]({tagId:b.id},function(){a.updateTags()},function(b){b.data&&404===b.data.errorCode&&a.updateTags()})},function(){e.hideAffix=!1})},a.sortableOptions={stop:function(b,c){l.update({},a.tags)}},a.updateTags(),a.tagTranslations=function(){e.hideAffix=!0,f.showSelectTagDialog().then(function(b){e.hideAffix=!1,l.update({tagId:b.id,field:"translations"},a.selectedTranslationIds,function(){})},function(){e.hideAffix=!1})}}]),angular.module("libreLingvoApp").factory("Translations",["HostUrl","$resource",function(a,b){return b(a+"/api/v1/users/:userId/translations/:translationId/:field",{userId:"@id",field:"@fieldName"},{update:{method:"PUT"}})}]),angular.module("libreLingvoApp").controller("TranslationDetailCtrl",["$scope","$state","$stateParams","Translations",function(a,b,c,d){d.get({userId:"me",translationId:c.translationId},function(b){a.translation=b})}]),angular.module("libreLingvoApp").controller("EditTranslationCtrl",["$scope","$state","$stateParams","Translations",function(a,b,c,d){d.get({userId:"me",translationId:c.translationId},function(b){a.translation=b}),a.edit=function(){d.update({userId:"me",translationId:c.translationId},{sourceText:a.translation.sourceWord.text,sourceLangCode:a.translation.sourceWord.langCode,resultText:a.translation.resultWord.text,resultLangCode:a.translation.resultWord.langCode,partOfSpeech:a.translation.partOfSpeech,learned:a.translation.learned})}}]),angular.module("libreLingvoApp").controller("GeneralQuestionModalCtrl",["$scope","$uibModalInstance","content","title","panelClass",function(a,b,c,d,e){a.content=c,a.title=d,a.panelClass=e,a.onYes=function(){b.close()},a.onNo=function(){b.dismiss()}}]),angular.module("libreLingvoApp").controller("TranslationCtrl",["$scope","$stateParams","Translations","Tags",function(a,b,c,d){a.updateTags=function(){c.query({userId:"me",translationId:b.translationId,field:"tags"},function(b){a.tags=b})},a.removeTag=function(c){d["delete"]({field:"translations",translationId:b.translationId,tagId:c.id},function(){a.updateTags()})},a.updateTags()}]),angular.module("libreLingvoApp").controller("NoteDetailCtrl",["$scope","$stateParams","Translations",function(a,b,c){a.translationId=b.translationId,c.get({userId:"me",translationId:b.translationId,field:"note"},function(b){a.note=b.note})}]),angular.module("libreLingvoApp").controller("EditNoteCtrl",["$scope","$stateParams","Translations",function(a,b,c){c.get({userId:"me",translationId:b.translationId,field:"note"},function(b){a.note=b.note}),a.edit=function(){c.update({userId:"me",translationId:b.translationId,field:"note"},{note:a.note})},a.tinymceOptions={setup:function(a){a.on("init",function(b){a=b.target,a.on("NodeChange",function(a){a&&"img"==a.element.nodeName.toLowerCase()&&tinyMCE.DOM.setAttribs(a.element,{height:"auto",style:"max-width:300px;"})})}),a.on("change",function(b){a=b.target})},inline:!1,plugins:"advlist autolink link image lists charmap print preview autoresize",skin:"lightgray",theme:"modern"}}]),angular.module("libreLingvoApp").factory("tts",function(){var a=window.webkitSpeechSynthesisUtterance||window.mozSpeechSynthesisUtterance||window.msSpeechSynthesisUtterance||window.oSpeechSynthesisUtterance||window.SpeechSynthesisUtterance;if(a){var b=new a,c=window.speechSynthesis.getVoices();b.voice=c[0],b.volume=1,b.rate=.7,b.lang="en"}var d=["uk"];return{play:function(c,d){a&&(b.lang=c,b.text=d,speechSynthesis.speak(b))},supports:function(b){return b&&!(d.indexOf(b)>-1)&&a}}}),angular.module("libreLingvoApp").controller("LessonCtrl",["$scope","$state","$stateParams","Lessons","tts","Users","lessonsUpdater",function(a,b,c,d,e,f,g){a.lessonPromise=d.get({lessonId:c.lessonId},function(c){a.lesson=c,0===a.lesson.completedPartsOfLesson?b.go("lesson.view"):b.go("lesson.exam")},function(a){a.data&&7===a.data.errorCode&&(g.updateLessons(),b.go("user-translations"))}).$promise,f.get({userId:"me"},function(b){a.autoPlay=b.autoPlayDuringLesson}),a.index=0,a.play=e.play,a.supports=e.supports}]),angular.module("libreLingvoApp").factory("Lessons",["$resource","HostUrl",function(a,b){return a(b+"/api/v1/users/me/lessons/:lessonId/:field",{lessonId:"@id",field:"@fieldName"},{update:{method:"PUT"}})}]),angular.module("libreLingvoApp").controller("LessonViewCtrl",["$scope","$state","$stateParams","Lessons","messageBox","MessageType",function(a,b,c,d,e,f){a.next=function(){a.lesson.translations[a.index+1]?a.index++:e.showGeneralQuestion("question.after.first.lesson.part",f.INFO).then(function(){d.update({lessonId:a.lesson.id,field:"lesson-part"},{},function(){b.go("lesson.exam",{lessonId:a.lesson.id})})})},a.back=function(){a.lesson.translations[a.index-1]&&a.index--},a.lessonPromise.then(function(){a.$watch("index",function(){a.sourceText=a.lesson.translations[a.index].sourceWord.text,a.sourceLangCode=a.lesson.translations[a.index].sourceWord.langCode,a.resultText=a.lesson.translations[a.index].resultWord.text,a.resultLangCode=a.lesson.translations[a.index].resultWord.langCode,a.partOfSpeech=a.lesson.translations[a.index].partOfSpeech,a.autoPlay&&a.supports(a.sourceLangCode)&&a.play(a.sourceLangCode,a.sourceText)})})}]),angular.module("libreLingvoApp").controller("LessonExamCtrl",["$scope","$state","$timeout","$rootScope","Lessons","lessonsUpdater",function(a,b,c,d,e,f){function g(a){var b,c,d;for(d=a.length;d;d--)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c}function h(a,b){return Math.floor(Math.random()*(b-a+1))+a}var i=5;a.reverse=!1,a.showAnswers=!1,a.setVariants=function(){var b=a.lesson.translations,c=b.slice();g(c);var d=b[a.index];a.variants=c.splice(0,i),-1===a.variants.indexOf(d)&&(a.variants[h(0,a.variants.length-1)]=d)},a.answer=function(d){if(!a.showAnswers){var g=a.lesson.translations;if(d===g[a.index])if(g[a.index+1]){var h=d.sourceWord.langCode;a.autoPlay&&a.reverse&&a.supports(h)&&a.play(h,d.sourceWord.text),a.index++,a.setVariants()}else a.reverse?e.update({lessonId:a.lesson.id,field:"lesson-part"},{},function(){f.updateLessons().then(function(){b.go("user-translations")})}):(a.reverse=!0,a.index=0,a.setVariants());else console.log(a.sourceLangCode,a.sourceText),a.autoPlay&&a.reverse&&a.supports(a.sourceLangCode)&&a.play(a.sourceLangCode,a.sourceText),a.showAnswers=!0,c(function(){a.showAnswers=!1,a.index=0,a.setVariants()},2e3)}},a.lessonPromise.then(function(){a.setVariants(),a.$watch("index",function(){a.sourceText=a.lesson.translations[a.index].sourceWord.text,a.sourceLangCode=a.lesson.translations[a.index].sourceWord.langCode,a.resultText=a.lesson.translations[a.index].resultWord.text,a.resultLangCode=a.lesson.translations[a.index].resultWord.langCode,a.partOfSpeech=a.lesson.translations[a.index].partOfSpeech,a.autoPlay&&!a.reverse&&a.supports(a.sourceLangCode)&&a.play(a.sourceLangCode,a.sourceText)})}),a.rightVariant=function(b){return b===a.lesson.translations[a.index]}}]),angular.module("libreLingvoApp").controller("NavBarCtrl",["$scope","$window","$rootScope","$state","oauth2","messageBox","Lessons","lessonsUpdater","NotificationType",function(a,b,c,d,e,f,g,h,i){var j=angular.element(b);a.$watch(function(){return b.innerWidth},function(b){a.windowWidth=b},!0),j.bind("resize",function(){a.$apply()}),a.logOut=function(){e.logOut()},a.$on("timer-stopped",function(a,b){h.updateLessons(!0)}),a.deleteLesson=function(a){c.hideAffix=!0,f.showGeneralQuestion("question.on.delete.lesson").then(function(){g["delete"]({lessonId:a.id},function(){h.updateLessons(),"user-translations"===d.$current.name&&c.updateTranslations()},function(a){a.data&&404===a.data.errorCode&&(h.updateLessons(),c.updateTranslations())}),c.hideAffix=!1},function(){c.hideAffix=!1})},a.getBellClass=function(){switch(c.notification){case i.LESSON_AVAILABLE:return"text-info";case i.LESSON_NOT_AVAILABLE:return"text-warning"}}}]),angular.module("libreLingvoApp").controller("FooterCtrl",["$scope","$cookies","$http","$translate",function(a,b,c,d){a.changeLanguage=function(e){c.defaults.headers.common["Accept-Language"]=e,b.put("default_lang_key",e),a.currentLanguage=e,d.use(e)},a.changeLanguage(b.get("default_lang_key")||"en")}]),angular.module("libreLingvoApp").factory("lessonsUpdater",["$rootScope","Lessons","NotificationType","amUtcFilter","amLocalFilter","amDifferenceFilter","audio",function(a,b,c,d,e,f,g){var h=function(a){var b=f(e(d(a)),null,"seconds");return b>2?b:-1};return{updateLessons:function(d){return b.query(function(b){b.forEach(function(a){a.diffInSeconds=h(a.waitUnitNextLessonPart)}),a.lessons=b;var e=a.lessons.find(function(a){return a.diffInSeconds<0});if(e)return a.notification=c.LESSON_AVAILABLE,void(d&&g.playAlert());var f=a.lessons.find(function(a){return a.diffInSeconds>0});return f?void(a.notification=c.LESSON_NOT_AVAILABLE):void(a.notification=c.NO_LESSONS)}).$promise}}}]).constant("NotificationType",{LESSON_AVAILABLE:1,LESSON_NOT_AVAILABLE:2,NO_LESSONS:3}),angular.module("libreLingvoApp").factory("UsersActions",["$resource","HostUrl",function(a,b){return a(b+"/api/v1/users/:action",{action:"@actionName"},{update:{method:"PUT"}})}]),angular.module("libreLingvoApp").controller("AdminCtrl",function(){}),angular.module("libreLingvoApp").controller("UsersCtrl",["$scope","Users","messageBox",function(a,b,c){a.updateUsers=function(){b.query(function(b){a.users=b})},a.updateUser=function(a){b.update({userId:a.id},{nonLocked:a.nonLocked,enabled:a.enabled})},a.deleteUser=function(d){c.showGeneralQuestion("Do you really want to delete this user?").then(function(){b["delete"]({userId:d.id},function(){a.updateUsers()},function(b){b.data&&404===b.data.errorCode&&a.updateUsers()})})},a.updateUsers()}]),angular.module("libreLingvoApp").factory("audio",function(){var a=new Audio("sounds/ring.wav");return{playAlert:function(){console.log("alert!!!"),a.play()}}}),angular.module("libreLingvoApp").controller("ResetPasswordCtrl",["$scope","$state","$stateParams","UsersActions","messageBox",function(a,b,c,d,e){a.resetKey=c["reset-key"],a.setResetKey=function(){d.update({action:"set-reset-key",email:a.email},{},function(){b.go("log-in"),e.show("message.password.reset.email.sent")})},a.resetPassword=function(){d.update({action:"reset-password","reset-key":c["reset-key"]},{password:a.password},function(){b.go("log-in")})}}]),angular.module("libreLingvoApp").controller("ChangePasswordCtrl",["$scope","$state","Users",function(a,b,c){a.changePassword=function(){c.update({userId:"me",field:"password"},{oldPassword:a.oldPassword,password:a.password},function(){b.go("profile")})}}]),angular.module("libreLingvoApp").controller("UtilsCtrl",["$scope","UsersActions",function(a,b){b.get({action:"read-only"},function(b){a.enabled=b.enabled}),a.updateEnabled=function(){b.update({action:"read-only"},{enabled:a.enabled})}}]),angular.module("libreLingvoApp").factory("Tags",["$resource","HostUrl",function(a,b){return a(b+"/api/v1/users/me/tags/:tagId/:field/:translationId",{folderId:"@id",field:"@fieldName"},{update:{method:"PUT"}})}]),angular.module("libreLingvoApp").controller("InputDialogModalCtrl",["$scope","$uibModalInstance","content","title","panelClass",function(a,b,c,d,e){a.title=d,a.panelClass=e,a.value=c,a.onSubmit=function(){b.close(a.value)},a.onCancel=function(){b.dismiss()}}]),angular.module("libreLingvoApp").controller("SelectTagModalCtrl",["$scope","$uibModalInstance","Tags",function(a,b,c){c.query({},function(b){a.tags=b}),a.selectTag=function(a){b.close(a)},a.onCancel=function(){b.dismiss()}}]),angular.module("libreLingvoApp").run(["$templateCache",function(a){a.put("views/admin.html",'<div class="row"> <div class="col-sm-2 sidebar"> <div class="list-group"> <a ui-sref="admin.users" class="list-group-item"><i class="fa fa-users"></i>Users</a> <a ui-sref="admin.utils" class="list-group-item"><i class="fa fa-cog"></i>Utils</a> <a href="" class="list-group-item"><i class="fa fa-language"></i>Translations</a> <a href="" class="list-group-item"><i class="fa fa-pie-chart"></i>Statistics</a> </div> </div> <div class="col-sm-10"> <ui-view></ui-view> </div> </div>'),a.put("views/change-password.html",'<form class="form-horizontal" ng-submit="changePassword()"> <div class="form-group"> <label for="OldPassword" class="col-sm-2 control-label">{{\'label.old.password\' | translate}}:</label> <div class="col-sm-6"> <input ng-model="oldPassword" required name="password" type="password" class="form-control" id="OldPassword"> </div> </div> <div class="form-group"> <label for="Password" class="col-sm-2 control-label">{{\'label.password\' | translate}}:</label> <div class="col-sm-6"> <input ng-model="password" required name="password" type="password" class="form-control" id="Password"> </div> </div> <div class="form-group"> <label for="ConfirmPassword" class="col-sm-2 control-label">{{\'label.confirm.password\' | translate}}:</label> <div class="col-sm-6"> <input ng-model="confirmPassword" wj-validation-error="confirmPassword != password ? \'Passwords don\\\'t match\' : \'\'" required type="password" class="form-control" id="ConfirmPassword"> </div> </div> <button type="submit" class="btn btn-primary">{{\'label.change.password\' | translate}}</button> </form>'),a.put("views/edit-note.html",'<form ng-submit="edit()"> <div class="form-group"> <textarea ng-model="note" ui-tinymce="tinymceOptions"></textarea> </div> <button class="btn btn-primary">{{\'label.save.changes\' | translate}}</button> </form>'),a.put("views/edit-translation.html",'<form ng-submit="edit()" role="form"> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.source.word\' | translate}}: </div> <div class="col-sm-8 text-info"> <input ng-model="translation.sourceWord.text" type="text" class="form-control"> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.translation.word\' | translate}}: </div> <div class="col-sm-8 text-info"> <input ng-model="translation.resultWord.text" type="text" class="form-control"> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.source.language\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{\'label.language.\'+translation.sourceWord.langCode | translate}}</span> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.translation.language\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{\'label.language.\'+translation.resultWord.langCode | translate}}</span> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.part.of.speech\' | translate}}: </div> <div class="col-sm-8 text-info"> <select name="name" id="part-of-speech" class="form-control" ng-model="translation.partOfSpeech" ng-change="updateTranslations()"> <option value="" disabled selected>{{\'label.part.of.speech\' | translate}}</option> <option value="NOT_DEFINED">{{\'label.part.of.speech.not_defined\' | translate}}</option> <option value="NOUN">{{\'label.part.of.speech.noun\' | translate}}</option> <option value="VERB">{{\'label.part.of.speech.verb\' | translate}}</option> <option value="ADJECTIVE">{{\'label.part.of.speech.adjective\' | translate}}</option> <option value="PARTICIPLE">{{\'label.part.of.speech.participle\' | translate}}</option> <option value="ADVERB">{{\'label.part.of.speech.adverb\' | translate}}</option> <option value="PRONOUN">{{\'label.part.of.speech.pronoun\' | translate}}</option> <option value="PREPOSITION">{{\'label.part.of.speech.preposition\' | translate}}</option> <option value="CONJUNCTION">{{\'label.part.of.speech.сonjunction\' | translate}}</option> <option value="INTERJECTION">{{\'label.part.of.speech.interjection\' | translate}}</option> <option value="ARTICLE">{{\'label.part.of.speech.article\' | translate}}</option> </select> </div> </div> <hr> <div class="row"> <div class="col-xs-1"> <input type="checkbox" class="form-control" ng-model="translation.learned"> </div> <div class="col-xs-11"> {{\'label.i.already.know.translation\' | translate}} </div> </div> <hr> <button type="submit" class="btn btn-primary">{{\'label.save.changes\' | translate}}</button> </form>'),a.put("views/footer.html",'<footer class="footer panel-footer navbar-fixed-bottom"> <ul> <li> <div class="btn-group" data-toggle="buttons"> <label class="btn btn-primary" ng-click="changeLanguage(\'en\')"> <input type="radio" name="options"> English </label> <label class="btn btn-primary" ng-click="changeLanguage(\'uk\')"> <input type="radio" name="options"> Українська </label> </div> </li> <li class="pull-right hidden-xs"> <a href="https://translate.google.com/">Google translate</a> </li> <li class="pull-right hidden-xs"> <a href="artifacts/libre-lingvo.crx" download>Chrome extension |</a> </li> </ul> </footer>'),a.put("views/general-question-modal.html",'<div class="modal-content" ng-class="panelClass"> <div class="modal-header panel-heading"> <button type="button" class="close" data-dismiss="modal" ng-click="onNo()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body panel-body"> <p>{{content | translate}}</p> </div> <div class="modal-footer panel-footer"> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="onYes()">{{\'label.yes\' | translate}} </button> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="onNo()">{{\'label.no\' | translate}} </button> </div> </div>'),a.put("views/input-dialog-modal.html",'<div class="modal-content panel-success"> <div class="modal-header panel-heading"> <button type="button" class="close" data-dismiss="modal" ng-click="onCancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body panel-body"> <input type="text" class="form-control" ng-model="value"> </div> <div class="modal-footer panel-footer"> <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="onSubmit()"> ok </button> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="onCancel()"> {{\'label.cancel\' | translate}} </button> </div> </div>'),
a.put("views/lesson-exam.html",'<div id="pass-exam" class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">{{\'label.choose.variant\' | translate}}</h3> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-5"> <ul class="list-group" uib-tooltip="{{\'label.language.\'+ (reverse?resultLangCode:sourceLangCode) | translate}}"> <li class="list-group-item"> <span ng-show="supports(reverse?resultLangCode:sourceLangCode)" ng-click="play(reverse?resultLangCode:sourceLangCode,reverse?resultText:sourceText)"> <i class="fa fa-volume-up"></i> </span> {{reverse?resultText:sourceText}} </li> </ul> </div> <div class="col-xs-5"> <ul class="list-group" uib-tooltip="{{\'label.language.\'+ (reverse?sourceLangCode:resultLangCode) | translate}}"> <li ng-repeat="variant in variants" class="list-group-item" ng-class="{\n                active: hover,\n                \'list-group-item-success\':rightVariant(variant) && showAnswers,\n                \'list-group-item-danger\':!rightVariant(variant) && showAnswers\n              }" ng-mouseenter="hover = true" ng-mouseleave="hover = false" ng-click="answer(variant)"> {{reverse?variant.sourceWord.text:variant.resultWord.text}} </li> </ul> </div> <div class="col-xs-1"> <ul class="list-group"> <li ng-repeat="variant in variants" class="list-group-item" ng-class="{active: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"> <span ng-show="supports(reverse?variant.sourceWord.langCode:variant.resultWord.langCode)" ng-click="play(reverse?variant.sourceWord.langCode:variant.resultWord.langCode,reverse?variant.sourceWord.text:variant.resultWord.text)"> <i class="fa fa-volume-up"></i> </span> <span class="text-muted" ng-hide="supports(reverse?variant.sourceWord.langCode:variant.resultWord.langCode)"> <span class="glyphicon glyphicon-volume-off"></span> </span> </li> </ul> </div> </div> <div class="row"> <div class="col-xs-12 text-center text-primary"> <span ng-show="lesson.translations[index].note" uib-popover="{{lesson.translations[index].note}}" popover-trigger="\'click\'" popover-placement="bottom" popover-append-to-body="true" uib-tooltip="{{\'label.note\' | translate}}" tooltip-append-to-body="true"> <i class="fa fa-sticky-note"></i> </span> <span class="text-muted" ng-show="partOfSpeech!==\'NOT_DEFINED\'"> {{\'label.part.of.speech.\'+partOfSpeech.toLowerCase() | translate}} </span> </div> </div> </div> <div class="panel-footer"> <uib-progressbar class="progress-striped active" max="lesson.translations.length" value="index" type="info"> <i>{{index}} / {{lesson.translations.length}}</i> </uib-progressbar> </div> </div>'),a.put("views/lesson-view.html",'<div id="view-lesson" class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">{{\'label.remember.translation\' | translate}}</h3> </div> <div class="panel-body"> <div class="row"> <div class="col-xs-6"> <div class="thumbnail" uib-tooltip="{{\'label.language.\'+ sourceLangCode | translate}}"> <span ng-show="supports(sourceLangCode)" ng-click="play(sourceLangCode,sourceText)"> <i class="fa fa-volume-up"></i> </span> {{sourceText}} </div> </div> <div class="col-xs-6"> <div class="thumbnail" uib-tooltip="{{\'label.language.\'+ resultLangCode | translate}}"> <span ng-show="supports(resultLangCode)" ng-click="play(resultLangCode,resultText)"> <i class="fa fa-volume-up"></i> </span> {{resultText}} </div> </div> </div> <div class="row"> <div class="col-xs-12 text-center text-primary"> <span ng-show="lesson.translations[index].note" uib-popover="{{lesson.translations[index].note}}" popover-trigger="\'click\'" popover-placement="bottom" popover-append-to-body="true" uib-tooltip="{{\'label.note\' | translate}}" tooltip-append-to-body="true"> <i class="fa fa-sticky-note"></i> </span> <span class="text-muted" ng-show="partOfSpeech!==\'NOT_DEFINED\'"> {{\'label.part.of.speech.\'+partOfSpeech.toLowerCase() | translate}} </span> </div> </div> </div> <div class="panel-footer clearfix"> <button ng-click="back()" class="btn btn-default pull-left">{{\'label.back\' | translate}}</button> <button ng-click="next()" class="btn btn-default pull-right">{{\'label.next\' | translate}}</button> </div> </div>'),a.put("views/lesson.html",'<div class="row"> <div class="col-sm-7 col-centered"> <ui-view></ui-view> </div> </div>'),a.put("views/log-in.html",'<h3> {{\'label.log.in.or\' | translate}} <button ng-click="submitReadonly()" class="btn btn-primary btn-lg">{{\'label.check.out.read.only.account\' | translate}}</button> </h3> <div class="col-sm-7"> <form class="form-horizontal row" ng-submit="submitAuthorization()"> <div class="form-group"> <label for="Email" class="col-sm-2 control-label">Email:</label> <div class="col-sm-10"> <input type="email" class="form-control" id="Email" placeholder="Email" ng-model="email"> </div> </div> <div class="form-group"> <label for="Password" class="col-sm-2 control-label">{{\'label.password\' | translate}}:</label> <div class="col-sm-10"> <input type="password" class="form-control" id="Password" placeholder="{{\'label.password\' | translate}}" ng-model="password"> </div> </div> <button type="submit" class="btn btn-primary">{{\'label.log.in\' | translate}}</button> </form> <div class="row"> <div class="text-center"> <a ui-sref="reset-password">{{\'label.forgot.password\' | translate}}</a> </div> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>Hello, welcome to LibreLingvo!</h1> <p class="text-justify"> LibreLingvo is electronic vocabulary, which provide way to save translations from Google Translate using chrome extension. </p> <span>Follow this steps:</span> <ol> <li> Install <a href="artifacts/libre-lingvo.crx" download>chrome extension</a> (Go Chrome menu -> More tools -> Extensions, drag and drop .crx file to extensions) </li> <li> <a target="_blank" ui-sref="log-in">Log in</a> </li> <li> Go to the <a href="https://translate.google.com/">Google Translate</a>, type a word and click on the first button <img src="https://goo.gl/CyvLz1" alt=""> under translation. </li> </ol> <p> <a ui-sref="log-in" class="btn btn-primary btn-lg">Get started</a> </p> </div>'),a.put("views/modal-message.html",'<div class="modal-content" ng-class="panelClass"> <div class="modal-header panel-heading"> <button type="button" class="close" data-dismiss="modal" ng-click="onOk()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{title | translate}}:</h4> </div> <div class="modal-body panel-body"> <p>{{content | translate}}</p> </div> <div class="modal-footer panel-footer"> <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="onOk()">Ok</button> </div> </div>'),a.put("views/navbar.html",'<!-- Add your site or application content here --> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">LibreLingvo</a> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse" ng-class="windowWidth<768?\'navbar-ex1-collapse\':\'\'"> <ul class="nav navbar-nav"> <li ui-sref-active="active" data-toggle="collapse" data-target=".navbar-ex1-collapse"><a ui-sref="main"><i class="fa fa-home"></i>{{\'label.home\' | translate}}</a></li> </ul> <ul class="nav navbar-nav navbar-right" ng-show="isAnnonymos"> <li ui-sref-active="active"><a ui-sref="log-in" data-toggle="collapse" data-target=".navbar-ex1-collapse"><i class="fa fa-sign-in"></i>{{\'label.log.in\' | translate}}</a></li> <li ui-sref-active="active"><a ui-sref="sign-up" data-toggle="collapse" data-target=".navbar-ex1-collapse"><i class="fa fa-user-plus"></i>{{\'label.sign.up\' | translate}}</a></li> </ul> <ul class="nav navbar-nav navbar-right" ng-show="hasUserAuthority"> <li ui-sref-active="active" ng-show="hasAdminAuthority"> <a ui-sref="admin.users" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <i class="fa fa-wrench"></i>Administration </a> </li> <li></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span ng-class="getBellClass()"> <i class="fa fa-bell"></i> <span ng-show="lessons.length" class="tag tag-pill tag-primary">{{lessons.length}}</span> <span class="caret"></span> </span> </a> <ul id="lessons-dropdown" class="dropdown-menu"> <li ng-repeat="lesson in lessons | orderBy:\'waitUnitNextLessonPart\'" ng-class="lesson.diffInSeconds>0?\'bg-warning\':\'bg-info\'"> <span> <a ng-show="lesson.diffInSeconds>0"> {{$index+1}}.{{\'label.wait\' | translate}} <timer countdown="lesson.diffInSeconds" interval="1000">{{hours}}:{{minutes}}:{{seconds}}</timer> </a> <a ui-sref="lesson({lessonId:lesson.id})" ng-show="lesson.diffInSeconds<=0"> {{$index+1}}.<i class="fa fa-graduation-cap"></i>{{\'label.move.on.next.lesson.part\' | translate}} </a> <i ng-click="deleteLesson(lesson)" class="fa fa-times"></i> </span> </li> <li ng-show="!lessons.length"> <span>{{\'label.no.lesson.notifications\' | translate}}</span> </li> <li role="separator" class="visible-xs divider"></li> </ul> </li> <li ui-sref-active="active"> <a ui-sref="user-translations" ui-sref="profile" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <i class="fa fa-language"></i> {{\'label.translations\' | translate}} </a> </li> <li ui-sref-active="active"> <a ui-sref="profile" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <i class="fa fa-user"></i>{{\'label.profile\' | translate}} </a> </li> <li><a ng-click="logOut()" ui-sref="main" data-toggle="collapse" data-target=".navbar-ex1-collapse"> <i class="fa fa-sign-out"></i>{{\'label.sign.out\' | translate}} </a> </li> </ul> </div> </nav>'),a.put("views/note-detail.html",'<a ng-show="!note" ui-sref="translation.edit({translationId:translationId})"> <i class="fa fa-pencil-square-o"></i> <span>{{\'label.create.note\' | translate}}</span> </a> <div ng-show="note" ng-bind-html="note"></div> <a ng-show="note" ui-sref="translation.edit({translationId:translationId})"> <i class="fa fa-pencil-square-o"></i> <span>{{\'label.edit.note\' | translate}}</span> </a>'),a.put("views/profile.html",'<form class="form-horizontal" ng-submit="saveChanges()"> <div class="form-group"> <label for="Email" class="col-sm-2 control-label">Email:</label> <div class="col-sm-5"> <input id="Email" type="email" class="form-control" ng-model="user.email" readonly> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-5"> <a ui-sref="change-password">{{\'label.change.password\' | translate}}</a> </div> </div> <div class="form-group"> <label for="Name" class="col-sm-2 control-label">{{\'label.name\' | translate}}:</label> <div class="col-sm-5"> <input type="text" class="form-control" id="Name" placeholder="Name" ng-model="user.name"> </div> </div> <div class="form-group"> <label for="WordsInOneLesson" class="col-sm-2 control-label">{{\'label.words.in.one.lesson\' | translate}}:</label> <div class="col-sm-5"> <input type="number" class="form-control" id="WordsInOneLesson" ng-model="user.translationsInOneLesson"> </div> </div> <div class="form-group"> <label for="LessonPartsCount" class="col-sm-2 control-label">{{\'label.lesson.parts.count\' | translate}}:</label> <div class="col-sm-5"> <input ng-model="user.lessonPartsCount" type="number" class="form-control" id="LessonPartsCount"> </div> </div> <div class="form-group"> <label for="MinutesBetweenLessonParts" class="col-sm-2 control-label">{{\'label.minutes.between.lesson.parts\'| translate}}:</label> <div class="col-sm-5"> <input ng-model="user.minutesBetweenLessonParts" type="number" class="form-control" id="MinutesBetweenLessonParts"> </div> </div> <div class="form-group"> <label for="AutoPlay" class="col-sm-2 control-label">{{\'label.pronounce.words\' | translate}}:</label> <div class="col-sm-5"> <input ng-model="user.autoPlayDuringLesson" type="checkbox" class="form-control" id="AutoPlay" placeholder="AutoPlay"> </div> </div> <div class="form-group"> <div class="col-sm-5"> <button type="submit" class="btn btn-primary">{{\'label.save.changes\' | translate}}</button> </div> </div> </form>'),a.put("views/reset-password.html",'<form ng-hide="resetKey" class="form-horizontal" ng-submit="setResetKey()"> <div class="form-group"> <label for="Email" class="col-sm-1 control-label">Email</label> <div class="col-sm-4"> <input type="text" class="form-control" id="Email" placeholder="Email" ng-model="email"> </div> </div> <button type="submit" class="btn btn-primary">{{\'label.recover.password\' | translate}}</button> </form> <form ng-show="resetKey" class="form-horizontal" ng-submit="resetPassword()"> <div class="form-group"> <label for="Password" class="col-sm-1 control-label">{{\'label.password\' | translate}}:</label> <div class="col-sm-7"> <input ng-model="password" required name="password" type="password" class="form-control" id="Password" placeholder="{{\'label.password\' | translate}}"> </div> </div> <div class="form-group"> <label for="ConfirmPassword" class="col-sm-1 control-label">{{\'label.confirm.password\' | translate}}:</label> <div class="col-sm-7"> <input ng-model="confirmPassword" wj-validation-error="confirmPassword != password ? \'Passwords don\\\'t match\' : \'\'" required type="password" class="form-control" id="ConfirmPassword" placeholder="{{\'label.confirm.password\' | translate}}"> </div> </div> <button type="submit" class="btn btn-primary">{{\'label.change.password\' | translate}}</button> </form>'),a.put("views/select-tag-modal.html",'<div class="modal-content panel-success"> <div class="modal-header panel-heading"> <button type="button" class="close" data-dismiss="modal" ng-click="onCancel()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{\'label.message.title.select.tag\' | translate}}</h4> </div> <div class="modal-body panel-body"> <ul class="list-group"> <li ng-repeat="tag in tags" class="list-group-item" ng-class="{active: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false" ng-click="selectTag(tag)"> <span> <i class="fa fa-tag"></i> {{tag.name}} </span> </li> </ul> </div> <div class="modal-footer panel-footer"> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="onCancel()"> {{\'label.cancel\' | translate}} </button> </div> </div>'),a.put("views/sign-up.html",'<form ng-submit="register()" class="form-horizontal"> <div class="form-group"> <label for="Email" class="col-sm-1 control-label">Email:</label> <div class="col-sm-7"> <input ng-model="user.email" required type="email" class="form-control" id="Email" placeholder="Email"> </div> </div> <div class="form-group"> <label for="Name" class="col-sm-1 control-label">{{\'label.name\' | translate}}:</label> <div class="col-sm-7"> <input ng-model="user.name" type="text" class="form-control" id="Name" placeholder="{{\'label.name\' | translate}}"> </div> </div> <div class="form-group"> <label for="Password" class="col-sm-1 control-label">{{\'label.password\' | translate}}:</label> <div class="col-sm-7"> <input ng-model="user.password" required name="password" type="password" class="form-control" id="Password" placeholder="{{\'label.password\' | translate}}"> </div> </div> <div class="form-group"> <label for="ConfirmPassword" class="col-sm-1 control-label">{{\'label.confirm.password\' | translate}}:</label> <div class="col-sm-7"> <input ng-model="confirmPassword" wj-validation-error="confirmPassword != user.password ? \'Passwords don\\\'t match\' : \'\'" required type="password" class="form-control" id="ConfirmPassword" placeholder="{{\'label.confirm.password\' | translate}}"> </div> </div> <button type="submit" class="btn btn-primary">{{\'label.sign.up\' | translate}}</button> </form>'),a.put("views/translation-detail.html",'<div class="row"> <div class="col-sm-4 text-muted"> {{\'label.source.word\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{translation.sourceWord.text}}</span> <a ui-sref="translation.edit({translationId:translation.id})" class="pull-right"> <i class="fa fa-pencil-square-o"></i> </a> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.translation.word\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{translation.resultWord.text}}</span> <a ui-sref="translation.edit({translationId:translation.id})" class="pull-right"> <i class="fa fa-pencil-square-o"></i> </a> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.source.language\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{\'label.language.\'+translation.sourceWord.langCode | translate}}</span> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.translation.language\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{\'label.language.\'+translation.resultWord.langCode | translate}}</span> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.part.of.speech\' | translate}}: </div> <div class="col-sm-8 text-info"> <span>{{\'label.part.of.speech.\'+translation.partOfSpeech.toLowerCase() | translate}}</span> <a ui-sref="translation.edit({translationId:translation.id})" class="pull-right"> <i class="fa fa-pencil-square-o"></i> </a> </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.views.quantity\' | translate}}: </div> <div class="col-sm-8 text-info"> {{translation.views}} </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.last.modification.date\' | translate}}: </div> <div class="col-sm-8 text-info"> {{translation.lastModificationDate | amUtc | amLocal | amDateFormat:\'DD.MM.YYYY HH:mm:ss\'}} </div> </div> <hr> <div class="row"> <div class="col-sm-4 text-muted"> {{\'label.translations.is.learned\' | translate}}: </div> <div class="col-sm-8 text-info"> {{translation.learned?\'label.yes\':\'label.no\' | translate}} <a ui-sref="translation.edit({translationId:translation.id})" class="pull-right"> <i class="fa fa-pencil-square-o"></i> </a> </div> </div> <hr> <ul class="list-group" ng-show="tags.length"> <li ng-repeat="tag in tags" class="list-group-item"> <span> <i class="fa fa-tag"></i> {{tag.name}} </span> <span class="pull-right" ng-click="removeTag(tag)"> <i class="fa fa-times"></i> </span> </li> </ul>'),a.put("views/translation.html",'<div class="row"> <div class="col-sm-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">{{\'label.translation.word\' | translate}}</h3> </div> <div class="panel-body"> <div ui-view="main"></div> </div> </div> </div> <div class="col-sm-6"> <div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">{{\'label.note\' | translate}}</h3> </div> <div class="panel-body"> <div ui-view="note"></div> </div> </div> </div> </div>'),a.put("views/user-translations.html",'<div class="row"> <div class="col-sm-3"> <div id="criteria-panel" class="panel"> <div class="panel-body"> <div class="form-group"> <input ng-model="searchSubstring" ng-change="updateTranslations()" ng-model-options="{ debounce: 700 }" type="text" class="form-control" placeholder="{{\'label.search.in.words\' | translate}}"> </div> <div class="form-group"> <select class="form-control" ng-model="langCodesPair" ng-change="updateTranslations()"> <option value="null" selected disabled> {{\'label.translation.languages\' | translate}}</option> <option value="null"> {{\'label.all\' | translate}}</option> <option ng-repeat="pair in langCodesPairs" value="{{pair}}"> {{\'label.language.\'+pair.source | translate}}->{{\'label.language.\'+pair.result | translate}} </option> </select> </div> <div class="form-group"> <select class="form-control" ng-model="partOfSpeech" ng-change="updateTranslations()"> <option value="ALL" selected disabled>{{\'label.part.of.speech\' | translate}}</option> <option value="ALL"> {{\'label.all\' | translate}}</option> <option ng-repeat="item in partsOfSpeech" value="{{item}}"> {{\'label.part.of.speech.\'+item.toLowerCase() | translate}} </option> </select> </div> <div class="form-group"> <select class="form-control" ng-model="sortField" ng-change="updateTranslations()"> <option value="" disabled selected>{{\'label.sort\' | translate}}</option> <option value="SORT_SOURCE_TEXT"> {{\'label.sorting.field.source.text\' | translate}}</option> <option value="SORT_RESULT_TEXT"> {{\'label.sorting.field.result.text\' | translate}}</option> <option value="SORT_VIEWS"> {{\'label.sorting.field.views\' | translate}}</option> <option value="SORT_MODIFICATION_DATE"> {{\'label.sorting.modification.date\' | translate}}</option> <!-- <option value=""> {{\'label.sorting.none\' | translate}}</option>--> </select> </div> <div class="form-group" ng-show="sortField"> <select class="form-control" ng-model="sortOrder" ng-change="updateTranslations()"> <option value="" disabled selected>{{\'label.sort.order\' | translate}}</option> <option value="ASC"> {{\'label.sorting.ascending\' | translate}}</option> <option value="DESC"> {{\'label.sorting.descending\' | translate}}</option> </select> </div> <div class="form-group"> <select class="form-control" ng-model="learned" ng-change="updateTranslations()"> <option value="ALL"> {{\'label.all\' | translate}}</option> <option value="true"> {{\'label.learned\' | translate}}</option> <option value="false"> {{\'label.not.learned\' | translate}}</option> </select> </div> <div class="text-muted"> <span>{{\'label.criteria.panel.filtered\' | translate:countInterpol}}</span> <span ng-show="lessons.length"> {{\'label.you.are.learning.translations\' | translate}}</span> </div> <hr> <div class="form-group"> <button ng-click="createTag()" class="btn btn-primary">{{\'label.create.tag\' | translate}}</button> </div> <ul class="list-group" ui-sortable="sortableOptions" ng-model="tags"> <li ng-repeat="tag in tags" class="list-group-item" ng-class="{active: isTagSelected(tag)}"> <span ng-click="toggleTag(tag)"> <i class="fa fa-tag"></i> {{tag.name}} </span> <span ng-click="deleteTag(tag)" class="pull-right"> <i class="fa fa-times"></i> </span> <span ng-click="renameTag(tag)" class="pull-right"> <i class="fa fa-pencil-square-o"></i>_ </span> </li> </ul> </div> </div> </div> <div class="col-sm-9"> <div class="row"> <div class="col-sm-12" id="tool-panel-container"> <div ui-scrollpoint="-45" id="tool-panel" class="panel" ng-hide="hideAffix"> <div class="panel-body"> <button class="btn btn-info" ng-click="updateTranslations()"> <i class="fa fa-refresh"></i> </button> <button class="btn btn-info" ng-click="learnTranslations(false)" ng-show="translations.length"> <i class="fa fa-graduation-cap"></i>{{\'label.learn.current.n.translations\' | translate:selectionInterpol}} </button> <button class="btn btn-info" ng-show="selectedTranslationIds.length" ng-click="learnTranslations(true)"> <i class="fa fa-graduation-cap"></i>{{\'label.learn.selected.n.translations\' | translate:selectionInterpol}} </button> <button ng-show="selectedTranslationIds.length" ng-click="tagTranslations()" class="btn btn-info"> <i class="fa fa-tag"></i> </button> <button ng-show="selectedTranslationIds.length" ng-click="deleteTranslations()" class="btn btn-danger"> <i class="fa fa-trash"></i> </button> </div> </div> </div> </div> <div class="row"> <div class="col-sm-12"> <span ng-hide="translations.length">{{\'label.no.translations.found\' | translate}}</span> <div ng-show="translations.length"> <table class="table table-hover"> <thead> <tr> <th>{{\'label.source.word\' | translate}}</th> <th>{{\'label.translation.word\' | translate}}</th> <th></th> <th></th> <th></th> <th></th> <th> <input type="checkbox" class="form-control" ng-model="checked" ng-click="toggleAllCheckboxes(checked)"> </th> </tr> </thead> <tbody> <tr ng-repeat="translation in translations"> <td uib-tooltip="{{\'label.language.\'+ translation.sourceWord.langCode | translate}}" tooltip-append-to-body="true"> <span ng-show="supports(translation.sourceWord.langCode)" ng-click="play(translation.sourceWord.langCode,translation.sourceWord.text)"> <i class="fa fa-volume-up"></i> </span> <span>{{translation.sourceWord.text}}</span> </td> <td uib-tooltip="{{\'label.language.\'+ translation.resultWord.langCode | translate}}" tooltip-append-to-body="true"> <span ng-show="supports(translation.resultWord.langCode)" ng-click="play(translation.resultWord.langCode,translation.resultWord.text)"> <i class="fa fa-volume-up"></i> </span> <span>{{translation.resultWord.text}}</span> </td> <td> <i ng-show="translation.learned" class="fa fa-graduation-cap text-primary" uib-tooltip="{{\'label.already.learned\' | translate}}" tooltip-append-to-body="true"></i> </td> <td> <span ng-show="translation.note" uib-popover="{{translation.note}}" popover-trigger="\'click\'" popover-placement="bottom" popover-append-to-body="true" uib-tooltip="{{\'label.note\' | translate}}" tooltip-append-to-body="true"> <i class="fa fa-sticky-note text-primary"></i> </span> </td> <td> <a ui-sref="translation.detail({translationId:{{translation.id}}})" uib-tooltip="{{\'label.view.detail\' | translate}}" tooltip-append-to-body="true"><i class="fa fa-info-circle"></i> </a> </td> <td> <a ui-sref="translation.edit({translationId:{{translation.id}}})" uib-tooltip="{{\'label.edit\' | translate}}" tooltip-append-to-body="true"> <i class="fa fa-pencil-square-o"></i> </a> </td> <td> <input class="form-control" type="checkbox" ng-checked="selectedTranslationIds.indexOf(translation.id) > -1" ng-click="toggleSelection(translation.id)"> </td> </tr> </tbody> </table> <div class="text-center"> <ul uib-pagination total-items="filteredRecords" ng-model="pageIndex" max-size="maxPagSize" class="pagination-md" boundary-links="true" direction-links="false" first-text="&laquo;" last-text="&raquo;" items-per-page="maxRecords" ng-change="updateTranslations()"> </ul> </div> </div> </div> </div> </div> </div>'),a.put("views/users.html",'<div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th>Email</th> <th>Name</th> <th>Not locked</th> <th>Enabled</th> </tr> </thead> <tbody> <tr ng-repeat="user in users"> <td>{{user.email}}</td> <td>{{user.name}}</td> <td><input type="checkbox" class="form-control" ng-model="user.nonLocked" ng-click="updateUser(user)"></td> <td><input type="checkbox" class="form-control" ng-model="user.enabled" ng-click="updateUser(user)"></td> <td> <i ng-click="deleteUser(user)" class="fa fa-times"></i> </td> </tr> </tbody> </table> </div>'),a.put("views/utils.html",'<div class="form-group"> <label for="EnabledReadOnly" class="col-sm-2 control-label">Read-only account is enabled:</label> <div class="col-sm-7"> <input ng-model="enabled" ng-change="updateEnabled()" type="checkbox" class="form-control" id="EnabledReadOnly" placeholder="EnabledReadOnly"> </div> </div>'),a.put("views/validation-error-modal-message.html",'<div class="modal-content panel-danger"> <div class="modal-header panel-heading"> <button type="button" class="close" data-dismiss="modal" ng-click="onOk()" aria-hidden="true">&times;</button> <h4 class="modal-title">{{\'label.message.title.error\' | translate}}:</h4> </div> <div class="modal-body panel-body"> <p ng-repeat="fieldError in fieldErrors">{{fieldError.message}}</p> </div> <div class="modal-footer panel-footer"> <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="onOk()">Ok</button> </div> </div>')}]);